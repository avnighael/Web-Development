<nav class="navbar navbar-default navbar-fixed-top ag-menu-navbar">
    <div class="container-fluid ">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" ng-init="isCollapsed = true" ng-click="isCollapsed = !isCollapsed">                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#/">
                <i class="" aria-hidden="true"></i>
                <strong>HandOuts</strong>
            </a>

        </div>

        <div id="navbar" class="navbar-collapse" ng-class="{collapse: isCollapsed}">
            <ul class="nav navbar-nav navbar-right">

                <li class="">

                    <form ng-show="model.currentUser.role != 'ADMIN' && href='#!/user/give/{{model.browseText}}/keywords'" class="" action="">
                        <input class="input_text grid-9 grid-xl-10 ag-search"
                               type="text"
                               placeholder="I care about..."
                               name="browseText"
                               ng-model="model.browseText"
                               title="Search for nonprofits">
                        <a class="glyphicon glyphicon-search"
                           href="#!/user/give/{{model.browseText}}"></a>
                    </form>
                </li>

                <li class="">
                    <a ng-if="model.currentUser.role != 'ADMIN' &&
                              model.currentUser.role != 'ORGANIZATION'"
                       class=""
                       href="#!/user/give">
                        Give
                    </a>

                    <a ng-if="model.currentUser.role === 'ORGANIZATION'"
                       class=""
                       href="#!/organization/projects">
                        Projects
                    </a>

                    <a ng-if="model.currentUser.role === 'ADMIN'"
                       class=""
                       href="#!/users/all/manage">
                        Manage Users
                    </a>
                </li>

                <li class="">
                    <a ng-if="model.currentUser.role != 'ADMIN' && model.currentUser.role != 'ORGANIZATION'" class=""
                       href="#!/browseOrganizations">
                        Organization
                    </a>
                </li>

                <li class="">
                    <a ng-if="model.currentUser.role != 'ADMIN'" class=""
                       href="#!/organization/opportunity/all">
                        Opportunities
                    </a>
                </li>

                <li>
                    <a ng-show="model.currentUser"
                       class=""
                       href="#!/profile">
                        <i class="fa fa-user" aria-hidden="true"></i>
                        <strong ng-if="model.currentUser.username">{{model.currentUser.username}}</strong>
                        <strong ng-if="!model.currentUser.username">{{model.currentUser.firstName}}</strong>
                    </a>

                    <a ng-show="!model.currentUser"
                       class=""
                       href="#!/login">
                        <strong>Login</strong>
                    </a>
                </li>

                <li class="">
                    <a ng-show="model.currentUser" class=""
                       ng-click="model.logout()">
                        <i class="fa fa-sign-out" aria-hidden="true"></i> Logout
                    </a>

                    <a ng-show="!model.currentUser" class=""
                       href="#!/register">
                        Sign Up
                    </a>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>


<div class="container-fluid ag-pushBody">
                <div>
                    <div ng-show="model.message"  class="alert alert-success alert-dismissable fade in" role="alert">
                        <a href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        {{model.message}}
                    </div>
                    <div ng-show="model.error"  class="alert alert-danger alert-dismissable fade in" role="alert">
                        <a href="" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        {{model.error}}
                    </div>

                    <h3>{{model.proj.title}}</h3>
                    <p>by {{model.proj.organization.name}} , {{model.proj.country}}</p>

                    <div ng-if="model.currentUser.role === 'ORGANIZATION' || model.currentUser.role === 'ADMIN'">
                        <a ng-show="model.wantVolunteers"
                           href="#!/organization/project/{{model.projectId}}/opportunity/create"
                           class="btn btn-primary btn-block">
                            Want Volunteers
                        </a>
                        <a ng-show="!model.wantVolunteers"
                           ng-click="model.removeVolunteersForm(model.proj.id)"
                           class="btn btn-danger btn-block">
                            No longer needed volunteers
                        </a>
                    </div>

                    <div ng-if="model.currentUser.role === 'DONOR' || model.currentUser.role === 'ADMIN'">
                        <a ng-show="model.opportunities.length > 0"
                           href="#!/project/{{model.projectId}}/opportunity/all"
                           class="btn btn-primary btn-block">
                            Volunteer Opportunities
                        </a>
                    </div>

                <div ng-if="model.currentUser.role === 'DONOR' || model.currentUser.role === 'ADMIN'">
                        <!--ng-show="model.currentUser.role == 'DONOR'">-->
                    <a ng-show="!model.saved"
                       ng-click="model.addToWishList(model.proj.id, model.proj)"
                       class="btn btn-success btn-block">
                        Add to WishList
                    </a>
                    <a ng-show="model.saved"
                       ng-click="model.removeFromWishList(model.proj.id)"
                       class="btn btn-danger btn-block">
                         Remove from Wishlist
                    </a>

                <div ng-if="model.currentUser.role === 'DONOR' || model.currentUser.role === 'ADMIN'">
                    <!--ng-show="model.currentUser.role == 'DONOR'">-->
                    <a ng-show="!model.favourite"
                       ng-click="model.addToFavourites(model.proj.id, model.proj)"
                       class="btn btn-info btn-block glyphicon glyphicon-heart-empty">
                        Add Project to Favourites
                    </a>
                    <a ng-show="model.favourite"
                       ng-click="model.removeFromFavourites(model.proj.id)"
                       class="btn btn-danger btn-block glyphicon glyphicon-heart">
                        Remove Project From Favourites
                    </a>
                </div>


                <span class="col-xs-12 text-right ag-donationTab"
                      ng-show="model.showDonate == true && model.currentUser.role != 'ADMIN' && model.currentUser.role != 'ORGANIZATION'">
                    <!--<a href="#!/user/{{model.currentUser}}/project/{{model.projectId}}/donate" class="btn btn-primary">-->
                    <a ng-click="model.donating = true; model.showDonate = false" class="btn btn-primary">
                        Donate Now
                    </a>
                </span>

                    <div ng-if="model.donating == true" class="ag-donationTab">
                        <div ng-show="!model.currentUser._id"  class="alert alert-danger" role="alert">
                            Kindly register/login to donate to this project
                        </div>
                        <span ng-show="model.currentUser._id">
                        <span>
                        <label for="amount">How much do you want to contribute?</label>
                        <input type="text"
                               class="form-control ag-form"
                               id="amount"
                               required
                               ng-model="donation.amount"
                               placeholder="Enter amount"
                               reqiured/>
                        </span>
                        <span>
                            <label>USD</label>
                        </span>
                        &nbsp &nbsp
                        <span class="text-right">
                            <a ng-click="model.sendDonation(donation)"
                               class="btn btn-primary"
                               type="button"> Donate
                            </a>
                        </span>
                        <div ng-show="model.donationError" class="text-danger">
                            {{model.donationError}}
                        </div>
                        </span>
                        </div>
                    </div>
                </div>

                <img class="img-responsive-home ag-fullWidth"
                     ng-src="{{model.proj.imageLink}}"
                     alt="{{model.proj.title}}"/>
                <div>
                    <b>Summary</b>
                    <p>{{model.proj.summary}}</p>
                </div>

                <div>
                    <span>Goal: {{model.proj.goal}}</span> &nbsp; &nbsp;
                    <span>funding: {{model.proj.funding}}</span> &nbsp; &nbsp;
                    <span>remaining: {{model.proj.remaining}}</span>

                </div>

                <!--<p>by {{org.organization.name}}</p>-->

    <!--Comment Section-->
    <div ng-show="model.currentUser.role != 'ADMIN'" class=".ag-comments-section">
        <hr/>
        <div class="ag-comments-heading">Comments</div>

        <div ng-show="model.blankCommentError"
             class="alert alert-danger alert-dismissible fade in" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">×</span>
            </button>
            <p class="ag-left-alignment">{{model.blankCommentError}}</p>
        </div>
        <div class="row">
            <div class="col-xs-12">
                <div class="input-group .ag-comment-box">
                    <input  ng-keyup="$event.keyCode == 13 && model.postComment(model.comment)"
                            class="form-control"
                            placeholder="Enter your comment here"
                            type="text"
                            ng-model="model.comment.text"/>
                    <div class="input-group-btn tnn-comment-send-div">
                        <a  ng-click="model.postComment(model.comment)"
                            class="btn btn-success"
                            title="Post a comment">
                            <i class="glyphicon glyphicon-send"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="ag-project-comments-display container-fluid"
         ng-repeat="comment in model.proj.comments">

        <!--<div ng-show="model.currentUser.role === 'ADMIN'">-->
            <!--&lt;!&ndash;Admin should not able to visit other profiles, follow or subscribe to people&ndash;&gt;-->
            <!--{{comment._user.firstName+" "+comment._user.lastName}}-->
            <!--{{comment.comment}}-->
        <!--</div>-->
        <span class="input-group container">
            <div>
            <a title="Posted at {{comment.createdAt}}"
               href="#!/user/{{comment._user._id}}">
                <!--{{comment._user.firstName+" "+comment._user.lastName}}-->
            </a>
            <div class="ag-left-alignment">
                <span>
                    <a href="#!/user/{{comment._user._id}}">
                        {{comment._user.firstName}}
                        {{comment._user.lastName}}
                    </a>
                </span>
                &nbsp; &nbsp;
                <span>
                    {{comment.comment}}
                </span>
            <span ng-show="comment._user._id === model.currentUser._id"
                  class="ag-comment-delete pull-right">
            <a ng-click="model.deleteComment(comment._id)" class="btn btn-danger">
                <span class="glyphicon glyphicon-trash "></span> Delete Comment
            </a>
        </span>
            </div>
                <div class="ag-left-alignment">Posted at {{comment.createdAt}}  </div>
            </div>



        </span>
    </div>

</div>

<div class = "ag-addBottomPadding"></div>
</div>

<nav class="navbar navbar-default navbar-fixed-bottom ag-footer-navbar">
    <div class="container-fluid">
        <div class="navbar-text pull-left">
            <a ng-if="model.isAdmin"
               class="navbar-link" href="#!/admin/user/{{model.thisUserId}}/add">
                <span class="glyphicon glyphicon-backward"></span>
            </a>

            <a ng-if="!model.isAdmin"
               class="navbar-link" href="#!/user/give">
                <span class="glyphicon glyphicon-backward"></span>
            </a>

        </div>
    </div>
</nav>
